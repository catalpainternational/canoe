<BeroHome>
    <GuestBanner></GuestBanner>
    hello! it's the home page

    <template if="{learningActivities}">
        <h4>{TRANSLATIONS.learning()}</h4>
        <div class="cards-container">
            <Card
                each="{topic in learningActivities}"
                contentItem="{topic}"
            ></Card>
        </div>
    </template>

    <template if="{courses}">
        <h4>{TRANSLATIONS.latestCourses()}</h4>
        <div class="cards-container">
            <Card
                each="{course in courses}"
                contentItem="{course}"
            ></Card>
        </div>
    </template>

    <template if="{courseCategories}">
        <h4>{TRANSLATIONS.courseCategories()}</h4>
        <div class="cards-container">
            <Card
                each="{category in courseCategories}"
                contentItem="{category}"
            ></Card>
        </div>
    </template>

    <template if="{resources}">
        <h4>{TRANSLATIONS.resources()}</h4>
        <div class="cards-container">
            <Card
                each="{resource in resources}"
                contentItem="{resource}"
            ></Card>
        </div>
    </template>

    <script>
        import { getRoute } from "ReduxImpl/Interface";

        import Card from "RiotTags/Components/Card.riot.html";
        import GuestBanner from "riot/Components/GuestBanner.riot.html";

        function BeroHome() {
            return {
                // state: {
                // },

                TRANSLATIONS: {
                    learning: () => gettext("Learning Activities"),
                    latestCourses: () => gettext("Latest Courses"),
                    courseCategories: () => gettext("Courses by Category"),
                    resources: () => gettext("Resources"),
                },

                get page() {
                    return getRoute().page;
                },

                get manifest() {
                    return this.page.manifest;
                },

                getPagesWithType(pageType) {
                    let matches = [];
                    Object.entries(this.manifest.pages).forEach(([id, data]) => {
                        if (data.type === pageType) {
                            matches.push(this.manifest.getSpecificPage(id));
                        }
                    })
                    return matches;
                },

                get learningActivities () {
                    if (!this.manifest.hasPageType('learningactivitytopicpage')) return false;
                    return this.getPagesWithType('learningactivitytopicpage');
                },

                get courses() {
                    if (!this.manifest.hasPageType('coursepage')) return false;
                    return this.getPagesWithType('coursepage');
                },

                get courseCategories () {
                    // TODO
                    return false;
                },

                get resources() {
                    if (!this.manifest.hasPageType('resourcearticle')) return false;
                    return this.getPagesWithType('resourcearticle');
                },
            };
        }

        BeroHome.components = {
            card: Card,
            // taglist: TagList,
            guestbanner: GuestBanner,
            // loadingdots: LoadingDots,
            // topmenu: TopMenu,
        };

        export default BeroHome;
    </script>
</BeroHome>
