<LessonOverview>
    <LessonObjective
        if="{state.hash === OBJECTIVES}"
        module="{OBJECTIVES}"
        nextModule="{CONTENT}"
        page="{props.page}"
    ></LessonObjective>
    <LessonContent
        if="{state.hash === CONTENT}"
        module="{CONTENT}"
        nextModule="{TEST}"
        page="{props.page}"
    ></LessonContent>
    <LessonTest
        if="{state.hash === TEST}"
        module="{TEST}"
        page="{props.page}"
    >
    </LessonTest>
    <LessonPage if="{!state.hash}" page="{props.page}"></LessonPage>

    <script>
        import { getRoute } from "ReduxImpl/Interface";

        import LessonObjective from "RiotTags/Lesson/LessonObjective.riot.html";
        import LessonContent from "RiotTags/Lesson/LessonContent.riot.html";
        import LessonTest from "RiotTags/Lesson/LessonTest.riot.html";
        import LessonPage from "RiotTags/WagtailPages/LessonPage.riot.html";

        import { getHashPieces } from "js/Routing";

        function readState() {
            const route = getRoute();
            const state = {
                hash: route.riotHash,
            };
            return state;
        }
        function LessonOverview() { return {
            state: {
                ...readState(),
            },

            OBJECTIVES: "objectives",
            CONTENT: "content",
            TEST: "test",
            onBeforeMount(props, state){
                const o = 0;
            },
            onMounted(props, state){
                const o = 0;
            },
            onUpdated(props, state){
                const o = 0;
            },
            storeListener(previousStoreState, storeState) {
                const newState = readState();
                if (this.state.hash !== newState.hash) {
                    this.update(newState);
                }
            }
        }}

        LessonOverview.components = {
            lessonobjective: LessonObjective,
            lessoncontent: LessonContent,
            lessontest: LessonTest,
            lessonpage: LessonPage,
        };

        export default LessonOverview;

    </script>
</LessonOverview>
