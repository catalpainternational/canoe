<HonorCode>
    <div>
        <h3 translate>Course exam</h3>
        <p class="score-explanation">
            <raw html="{ youMustScoreAtLeastMessage() }"></raw>
        </p>
    </div>
    <div class="code">
        <h4 translate>Code of conduct</h4>
        <p>
            { TRANSLATIONS.promise() }
        </p>
        <div class="i-agree-container" onclick="{agreeToCode}">
            <span class="checkbox"></span>
            <span if="{state.hasAgreed}" class="checkmark"></span>
            <p>{ TRANSLATIONS.agree() }</p>
        </div>
    </div>
    <div>
        <button
            class="btn-primary"
            onclick="{goToCourseExam}"
            disabled="{!state.hasAgreed}"
            translate
        >
            Start Exam
        </button>
        <button class="btn-secondary" onclick="{goToCourseOverview}" translate>
            Back to Course
        </button>
    </div>

    <script>
        import Raw from "RiotTags/Components/Raw.riot.html";

        export default {
            TRANSLATIONS: {
                promise: () => gettext('Youâ€™re about to start a course exam. Do you promise that you will complete this exam on your own, without assistance from anyone?'),
                agree: () => gettext('Yes, I agree'),
            },

            components: {
                raw: Raw,
            },

            state: {
                hasAgreed: false,
            },

            agreeToCode() {
                this.update({ hasAgreed: !this.state.hasAgreed });
            },

            goToCourseExam() {
                location.hash = `#${this.props.courseId}/exam/1`;
            },

            goToCourseOverview() {
                location.hash = "#" + this.props.courseId;
            },

            youMustScoreAtLeastMessage() {
                const { minimumScore } = this.props;
                // message for what percent a user must score to pass the exam
                return gettext("To pass this exam you need to score <strong>%1% or higher</strong>", minimumScore);
            },
        };
    </script>
</HonorCode>
