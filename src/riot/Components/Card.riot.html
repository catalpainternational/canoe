<Card>
    <a class="card {props.status}" href="#{props.link}">
        <div class="card-image">
            <img crossorigin="anonymous" src="{getCardImageUrl()}" class="card-hero-image" />
            <span class="card-status"><span class="icon"></span></span>
        </div>
        <div class="card-title">
            <h5 class="clamp-lines">{props.title}</h5>
            <progress
                if="{props.status === 'in-progress'}"
                value="{props.progressValue}"
                max="{props.progressMax}"
            ></progress>
            <progress if="{props.status === 'complete'}" value="1" max="1"></progress>
        </div>
    </a>
    <script>
        import contentStockImg from "img/stock_content.png";
        import courseStockImg from "img/stock_course.png";
        import lessonStockImg from "img/stock_lesson.png";
        import objectiveStockImg from "img/stock_objective.png";
        import testStockImg from "img/stock_test.png";

        export default {
            getCardImageUrl() {
                const cardType = this.props.cardtype;
                // we should have a default fallback just in case we don't have a cardType passed through
                let fallbackImg = contentStockImg;
                if (cardType === 'course') fallbackImg = courseStockImg;
                if (cardType === 'lesson') fallbackImg = lessonStockImg;
                if (cardType === 'objective') fallbackImg = objectiveStockImg;
                if (cardType === 'test') fallbackImg = testStockImg;

                return this.props.imageUrl
                    ? `${process.env.API_BASE_URL}${this.props.imageUrl}?cardImageFallback=${fallbackImg}`
                    : fallbackImg;
            },
        };
    </script>
</Card>
